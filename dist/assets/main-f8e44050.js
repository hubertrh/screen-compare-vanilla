import{h as b,a as C,C as A,u as k,K as L,s as x}from"./domUtils-94b4f7fa.js";import{a as N,g as $}from"./firestore-7a65add7.js";console.log.bind(document);class D{constructor(){this.detailsUnitSwitch=document.querySelector(".text-units-switch"),this.unitsDivider=0,this.switchUnits="",this.fractionDigits=0,this.diagonals=[],this.units=[],this.ratios=[],this.resolutions=[],this.ppis=[],this.sides=[],this.screenBox=document.querySelector(".visualization-box"),this.media1000=window.matchMedia("(max-width: 1000px)"),this.detailsUnitSwitch.addEventListener("change",this.onTableUnitsChange.bind(this))}handleUnitsValues(){this.detailsUnitSwitch.checked?(this.unitsDivider=1,this.switchUnits="cm",this.fractionDigits=1):(this.unitsDivider=2.54,this.switchUnits="in",this.fractionDigits=2)}handleDiagonalsAndUnits(){this.diagonals=Array.from(document.querySelectorAll(".size-input[required]")).map(e=>Number(e.value.replace(/,/g,"."))),this.units=Array.from(document.querySelectorAll(".units-label")).map(e=>e.textContent),this.units.forEach((e,s)=>{e==="in"&&this.diagonals[s]>0&&(this.diagonals[s]=this.diagonals[s]*2.54)})}handleRatios(){this.ratios=Array.from(document.querySelectorAll(".ratio-input[required]")).map(e=>Number(e.value.replace(/,/g,".")))}handleResolutions(){this.resolutions=Array.from(document.querySelectorAll(".res-input")).map(e=>Number(e.value.replace(/,/g,".")))}calculatePpis(){this.ppis=[];for(let e=0;e<=2;e++)if(this.resolutions[e*2]!==0&&this.resolutions[e*2+1]!==0){const s=Math.round(Number(Math.sqrt(this.resolutions[e*2]**2+this.resolutions[e*2+1]**2)));this.ppis=[...this.ppis,Number(Math.round(s/(this.diagonals[e]/this.unitsDivider)))]}else this.ppis=[...this.ppis,""]}calculateSides(){this.sides=[],this.diagonals.forEach((e,s)=>{const i=this.ratios[s*2],r=this.ratios[s*2+1],l=e*r/Math.sqrt(i**2+r**2),a=i/r*l;this.sides.push(a),this.sides.push(l)})}calculateProportions(){const e=document.querySelectorAll(".visualization");let s=getComputedStyle(document.querySelector(".visualization-box")).width;s=Number(s.slice(0,s.length-2));let i=getComputedStyle(document.querySelector(".visualization-box")).height;i=Number(i.slice(0,i.length-2));let r=0;this.sides.forEach((l,a)=>{(a+1)%2===1&&r<l/s&&(r=l/s),(a+1)%2===0&&r<l/i&&(r=l/i)}),e.forEach((l,a)=>{l.setAttribute("style",`
          width: ${this.sides[a*2]/r}px; 
          height: ${this.sides[a*2+1]/r}px;
        `)})}handleGuides(){const e=document.querySelectorAll(".diagonal");this.diagonals.forEach((o,n)=>{e[n].textContent=`${Number((o/this.unitsDivider).toFixed(this.fractionDigits))} ${this.switchUnits}`;const c=Math.atan(this.ratios[n*2+1]/this.ratios[n*2])*(180/Math.PI);e[n].setAttribute("style",`transform: rotate(-${c}deg)`),e[n].style.setProperty("--after-width",`${e[n].textContent.length-1}em`)});const s=[...document.querySelectorAll(".visualization")].sort((o,n)=>{const c=Number(o.children[0].textContent.slice(0,o.children[0].textContent.length-3));return Number(n.children[0].textContent.slice(0,n.children[0].textContent.length-3))-c});s.forEach((o,n)=>{o.style.zIndex=(n+1).toString();let c=2;o.classList.contains("hidden")&&(s.splice(n,1),c=1);let d=o.children[0].style.transform;o.children[0].style.transform=`${d} translate(${-n*2.5+c}em)`,d=o.children[0].style.transform,Number(o.style.width.slice(0,-2))<=150&&(o.children[0].style.transform=d.slice(0,-15))});const i=document.querySelector(".guides-wrapper--bottom"),r=document.querySelector(".guides-wrapper--left");for(;i.firstChild;)i.removeChild(i.firstChild);for(;r.firstChild;)r.removeChild(r.firstChild);this.sides.forEach((o,n)=>{let c;(n+1)%2===1?c="bottom":c="left";const d=s[Math.floor(n/2)],v=d.className.slice(d.className.length-1,d.className.length)-1,y=document.createElement("p");y.className=`guides guides--${c} guides--${c}--${v+1}`;const w=`${Number((this.sides[v*2+n%2]/this.unitsDivider).toFixed(this.fractionDigits))} ${this.switchUnits}`;y.textContent=w.toString(),c==="bottom"&&i.appendChild(y),c==="left"&&r.appendChild(y)});const l=[...e].sort((o,n)=>Number(n.textContent.slice(0,n.textContent.length-3))-Number(o.textContent.slice(0,o.textContent.length-3)));e.forEach(o=>{o.classList.remove("dashed","dotted")});let a=[];l.forEach((o,n)=>{const c=Number(getComputedStyle(l[n]).transform.slice(7,getComputedStyle(l[n]).transform.length-1).split(", ")[0]);a=[...a,c],n!==0&&(a[n]===a[n-1]||a[n]===a[n-2])&&(l[n-1].classList.contains("dashed")?o.classList.add("dotted"):o.classList.add("dashed"))});const u=document.querySelectorAll(".visualization");let h=0,f=0;u.forEach(o=>{o.offsetHeight>h&&(h=o.offsetHeight),o.offsetWidth>f&&(f=o.offsetWidth)}),i.style.width=`${f}px`,r.style.height=`${h}px`}centerVisualisations(){const e=document.querySelectorAll(".visualization");let s=0,i=0;e.forEach(r=>{r.offsetHeight>s&&(s=r.offsetHeight),r.offsetWidth>i&&(i=r.offsetWidth)}),this.screenBox.setAttribute("style",`
      width: ${i}px;
      height: ${s}px;
      `)}resizeBox(){const e=document.querySelector(".screen-results__visualizations"),s=getComputedStyle(this.screenBox).height;e.style.height=`calc(${s} + 6em`}handleThirdScreenElement(){const e=document.querySelector(".visualization--3");this.diagonals.length===2?e.classList.add("hidden"):e.classList.remove("hidden")}handleResultsTable(){const e=document.querySelectorAll(".values__row");[...e[0].children].forEach((i,r)=>{i.textContent=`${Number((this.sides[r*2]/this.unitsDivider).toFixed(2))} ${this.switchUnits}`}),[...e[1].children].forEach((i,r)=>{i.textContent=`${Number((this.sides[r*2+1]/this.unitsDivider).toFixed(2))} ${this.switchUnits}`}),[...e[2].children].forEach((i,r)=>{i.textContent=`${Number((this.diagonals[r]/this.unitsDivider).toFixed(2))} ${this.switchUnits}`}),[...e[3].children].forEach((i,r)=>{i.textContent=`${Number((this.sides[r*2]/this.unitsDivider*(this.sides[r*2+1]/this.unitsDivider)).toFixed(2))} ${this.switchUnits}²`}),(()=>{console.log(`this.ppis: ${this.ppis}`);const i=document.querySelector(".ppi-guide");[...e[4].children].forEach((r,l)=>{this.resolutions[l*2]===0||this.resolutions[l*2+1]===0?(r.style.opacity="0",r.textContent=""):(r.style.opacity="1",r.textContent=this.ppis[l].toString())}),[...e[4].children].every(r=>r.style.opacity==="0")?(e[4].style.display="none",i.style.display="none",i.style.opacity="0"):(e[4].style.display="grid",i.style.display="block",i.style.opacity="1")})()}handlePpiValidationColors(){const e={mobile:17.526,tablet:28.194};this.diagonals.forEach((s,i)=>{const r={mobile:{green:400,darkgoldenrod:300,brown:0},tablet:{green:200,darkgoldenrod:150,brown:0},desktop:{green:150,darkgoldenrod:100,brown:0}};function l(o){return o<=e.mobile?"mobile":o<=e.tablet?"tablet":"desktop"}function a(o,n){const c=r[n];for(let d in c)if(o>=c[d])return d}const u=l(s),h=a(this.ppis[i],u);document.querySelectorAll(".row__value.ppi")[i].style.setProperty("--validation-color",h)})}saveFormData(){const s=!document.querySelector(".screen--inactive")?3:2;for(let i=0;i<s;i++){const r=this.diagonals[i]/2.54,l=this.ratios[i*2],a=this.ratios[i*2+1];N(r,l,a)}}async onTableUnitsChange(){await Promise.resolve(this.handleUnitsValues()),this.calculate(),this.handleResultsTable(),this.handlePpiValidationColors()}async calculate(){this.calculatePpis(),await Promise.resolve(this.calculateSides()),await Promise.resolve(this.calculateProportions()),await Promise.resolve(this.handleGuides()),await Promise.resolve(this.centerVisualisations()),this.media1000.matches&&this.resizeBox()}resetState(){this.unitsDivider=0,this.switchUnits="",this.fractionDigits=0,this.diagonals=[],this.units=[],this.ratios=[],this.resolutions=[],this.ppis=[],this.sides=[]}async handleComparison(){this.resetState(),await Promise.resolve(this.handleUnitsValues()),this.handleDiagonalsAndUnits(),this.handleRatios(),this.handleResolutions(),this.calculate(),this.handleThirdScreenElement(),this.handleResultsTable(),this.handlePpiValidationColors(),this.saveFormData()}}const B=document.querySelectorAll("header *");B.forEach(t=>{b(t)});const I=()=>{const t=document.querySelectorAll(".screen")[2],e=t.getElementsByTagName("*");t.classList.contains("screen--inactive")?[...e].forEach(s=>{s.tabIndex=-1}):[...e].forEach(s=>{s.removeAttribute("tabindex")})};window.addEventListener("keydown",t=>{t.key==="Tab"&&I()});const T=document.querySelectorAll(".name-edit"),P=t=>{const e=t.target.closest(".screen-name").querySelector(".name");e.hasAttribute("readonly")?(e.removeAttribute("readonly"),e.select()):e.setAttribute("readonly","")};T.forEach(t=>{t.addEventListener("click",e=>P(e))});const g=document.querySelectorAll(".name"),U=t=>{t.target.value.length<=20&&t.target.value.length>=1&&(t.target.size=t.target.value.length)},p=document.querySelectorAll(".ref-screen"),S=(t,e)=>{g[e].value===""?t.textContent=`Display ${e+1}`:(t.textContent=g[e].value.slice(0,7),g[e].value.length>7&&(t.textContent=`${t.textContent}...`))},R=t=>{t.target.hasAttribute("readonly")&&(t.key==="Enter"||t.keyCode>47&&t.keyCode<58||t.keyCode>64&&t.keyCode<91||t.keyCode>96&&t.keyCode<123)?t.target.removeAttribute("readonly"):t.key==="Enter"&&(t.target.setAttribute("readonly",""),t.target.blur()),p.forEach((e,s)=>{S(e,s)})},z=t=>{t.relatedTarget&&t.relatedTarget.id==="edit-name-button"||(t.target.setAttribute("readonly",""),t.target.blur())};g.forEach(t=>{t.addEventListener("input",e=>U(e)),t.addEventListener("keydown",e=>R(e)),t.addEventListener("focusout",e=>z(e))});const H=document.querySelectorAll(".units-switch"),E=t=>{const e=document.querySelector(`label[for=${t.target.id}].units-label`);e&&(e.textContent=t.target.checked?"cm":"in")};H.forEach(t=>{t.addEventListener("change",e=>E(e))});const F=document.querySelector(".btn-add"),_=document.querySelector(".btn-remove--last-form"),M=()=>{document.querySelectorAll(".screen").item(2).classList.remove("screen--inactive"),document.querySelector(".screen-forms").classList.remove("screen-forms--double"),document.querySelector(".btn-add").classList.add("color-transparent"),document.getElementById("size-3").setAttribute("required",""),document.getElementById("units-3").setAttribute("required",""),document.getElementById("ratio-w-3").setAttribute("required",""),document.getElementById("ratio-h-3").setAttribute("required",""),setTimeout(()=>{document.querySelector(".btn-add").classList.add("invisible")},150)},V=()=>{document.querySelectorAll(".screen").item(2).classList.add("screen--inactive"),document.querySelector(".screen-forms").classList.add("screen-forms--double"),document.querySelector(".btn-add").classList.remove("invisible"),document.querySelector(".btn-add").classList.remove("color-transparent"),document.getElementById("screen-form-3").reset(),document.getElementById("size-3").removeAttribute("required"),document.getElementById("units-3").removeAttribute("required"),document.getElementById("ratio-w-3").removeAttribute("required"),document.getElementById("ratio-h-3").removeAttribute("required")};F.addEventListener("click",()=>M());_.addEventListener("click",()=>V());const W=document.querySelectorAll("input[type=number]");W.forEach(t=>{t.addEventListener("input",e=>{let s;e.target.classList.contains("res-input")?s=/^\d{1,5}\.\d{0,2}$|^\d{1,5}$/g.test(e.target.value):s=/^\d{1,3}\.\d{0,2}$|^\d{1,3}$/g.test(e.target.value),s||(e.target.value=e.target.value.slice(0,-1))})});const G=()=>{const t=document.querySelector(".screen-results"),e=new MutationObserver(s=>{s.forEach(i=>{i.target.classList.contains("invisible")||(document.querySelector(".screen-results").classList.remove("transparent"),e.disconnect())})});e.observe(t,{attributes:!0,attributeFilter:["class"]}),t.classList.remove("invisible"),document.querySelector(".screen-forms").classList.remove("screen-forms--double"),document.querySelector(".btn-wrapper").style.translate="0",document.querySelectorAll(".screen").item(2).classList.remove("screen--last")},K=()=>{const t=document.querySelectorAll(".screen")[2],e=document.querySelector(".top__ref-screen-bar"),s=document.querySelectorAll(".values__row");t.classList.contains("screen--inactive")?(e.style.setProperty("--tab-width","50%"),e.children[2].style.display="none",s.forEach(i=>{i.children[2].style.display="none",i.style.gridTemplateColumns="repeat(2, 1fr)"})):(e.style.setProperty("--tab-width","33.33%"),e.children[2].style.display="block",s.forEach(i=>{i.children[2].style.display="block",i.style.gridTemplateColumns="repeat(3, 1fr)"}))},O=new D,X=()=>{(()=>{document.querySelectorAll("input[required]").forEach(i=>{i.value===""&&(i.value=i.placeholder)});const s=document.querySelectorAll(".res-input");s.forEach((i,r)=>{i.value!==""&&(i.classList.remove("field-error"),r%2?s[r-1].value===""&&s[r-1].classList.add("field-error"):s[r+1].value===""&&s[r+1].classList.add("field-error"))})})(),O.handleComparison(),G(),K()},Y=(t,e)=>{document.querySelector(".top__ref-screen-bar").style.setProperty("--screen-index",e.toString()),[...t.target.parentElement.children].forEach(i=>{i.style.fontWeight="400"}),t.target.style.fontWeight="600"},j=(t,e)=>{document.querySelectorAll(".values__row").forEach(i=>{[...i.children].forEach(r=>{const l=parseFloat(r.textContent),a=parseFloat(i.children[e].textContent);let u=l/a;u=Math.round(u*100);const h=isNaN(u)?'"—"':`"(${u}%)"`;r.style.setProperty("--value-reference",h)})})};p.forEach((t,e)=>{S(t,e),t.addEventListener("click",s=>{const i=Number(s.target.id.slice(11)-1);Y(s,i),j(s,i)})});const J=document.querySelectorAll(".common-screens-btn"),Q=document.querySelector(".btn-remove--common-screens"),m=document.querySelector(".common-screens-dialog");J.forEach(t=>{t.addEventListener("click",()=>m.showModal())});Q.addEventListener("click",()=>m.close());m.addEventListener("click",t=>{const e=m.getBoundingClientRect();e.top<=t.clientY&&t.clientY<=e.top+e.height&&e.left<=t.clientX&&t.clientX<=e.left+e.width||m.close()});const q=document.querySelector(".btn-main--compare"),Z=document.querySelector(".btn-reset"),ee=document.querySelectorAll(".screen-form"),te=document.querySelectorAll(".screen-forms input:not([type='checkbox'])"),se=document.querySelectorAll(".screen-forms input[type='checkbox']"),ie=()=>{ee.forEach(t=>{t.reset()})};Z.addEventListener("click",()=>{ie()});q.addEventListener("click",()=>{X(),p[0].click(),$(),document.getElementById("screen-results").scrollIntoView({behavior:"smooth"})});te.forEach(t=>{t.addEventListener("keypress",e=>{!t.classList.contains("name")&&e.key==="Enter"&&(e.target.blur(),q.click())}),t.addEventListener("focus",e=>{e.target.select()}),b(t)});se.forEach(t=>{t.addEventListener("click",e=>{e.target.parentNode.childNodes.forEach(s=>{e.clientX!==0&&s.nodeName==="INPUT"&&s.blur()})}),t.addEventListener("keydown",e=>{e.key==="Escape"&&e.target.parentNode.childNodes.forEach(s=>{s.nodeName==="INPUT"&&s.blur()}),e.key==="Enter"&&[...e.target.parentNode.children].forEach(s=>{s.hasAttribute("type")&&s.getAttribute("type")==="checkbox"&&(s.checked=!s.checked,E(e))})})});const re=document.querySelector(".switch-mode");re.addEventListener("click",()=>{C()});window.addEventListener("load",()=>{new A().handleCookieConsent(),k(),new L().appendKofi(),x()});
